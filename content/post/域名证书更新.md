---
title: 域名证书更新
date: 2021-11-07 14:24:08
categories: ["技术文章"]
tags: ["域名","证书"]
draft: false
---

## 因子
从15年买了云服务器开始，就开始折腾服务器这些事情。虽然买了域名，备案，ssl证书都得自己捯饬，才能让自己的个人项目跑在云端之上，也算是追赶上了全民上云的步伐。这不，每当到了双11期间，各种云服务商都在搞活动，这时候也是我更新ssl证书的时候了。

**推荐一款免费域名解析服务：Free DNS service：https://dns.he.net/index.cgi**

## 目的
1. 因为是个人使用，所以使用免费的证书。
2. 拥有一个自己的https域名支持，能支持自己的小程序合法请求。

## 步骤
1. 申请免费的ssl证书
2. 将证书安装到自己的nginx里，使得对应域名具备https能力

## 实践
1. 申请证书
在 https://freessl.cn/ 网站，申请免费1年的证书。

<img src="/mb/images/deepstudy/ssl_01.png">

按网站提示通过验证后，即可得到域名证书文件。

<img src="/mb/images/deepstudy/ssl_02.png">

2. nginx安装证书
如果是使用的其他服务器，如IIS，Apache等，需按照各自方式安装。

***注意：key是证书秘钥，crt或者pem是证书文件***

``` conf
server {
        listen 443 ssl;
        server_name xx.xxxxxxx.top;
        #ssl on;
        ssl_certificate cert/cert.crt;
        ssl_certificate_key cert/cert.key;
        ssl_session_timeout 5m;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; 
        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; 
        ssl_prefer_server_ciphers on;
        
        location / {
            root   html;
            index  index.html index.htm;
        }
}
```

3. 访问验证

<img src="/mb/images/deepstudy/ssl_03.png">

